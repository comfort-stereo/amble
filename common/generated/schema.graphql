type Query {
  comment(id: UUID!): Comment
  comments(first: Int = 10, after: UUID = null): CommentPage!
  group(id: UUID!): Comment
  groups(first: Int = 10, after: UUID = null): GroupPage!
  membership(id: UUID!): Membership
  memberships(first: Int = 10, after: UUID = null): MembershipPage!
  post(id: UUID!): Post
  posts(first: Int = 10, after: UUID = null): PostPage!
  user(id: UUID!): User
  users(first: Int = 10, after: UUID = null): UserPage!
  me: User
}

type Comment {
  id: UUID!
  created: DateTime!
  updated: DateTime!
  content: String!
  user: User!
  post: Post!
  parent: Comment
  children(first: Int = 10, after: UUID = null): CommentPage!
}

"""
A UUID passed in string format.
"""
scalar UUID

"""
The javascript `Date` as string. Type represents date and time as the ISO Date string.
"""
scalar DateTime

type User {
  id: UUID!
  created: DateTime!
  updated: DateTime!
  username: String!
  email: String!
  memberships(first: Int = 10, after: UUID = null): MembershipPage!
  posts(first: Int = 10, after: UUID = null): PostPage!
  comments(first: Int = 10, after: UUID = null): CommentPage!
}

type MembershipPage {
  total: Int!
  edges: [MembershipPageEdge!]!
  nodes: [Membership!]!
  pageInfo: PageInfo!
}

type MembershipPageEdge {
  cursor: UUID!
  node: Membership!
}

type Membership {
  id: UUID!
  created: DateTime!
  updated: DateTime!
}

type PageInfo {
  startCursor: UUID
  endCursor: UUID
  hasNextPage: Boolean!
}

type PostPage {
  total: Int!
  edges: [PostPageEdge!]!
  nodes: [Post!]!
  pageInfo: PageInfo!
}

type PostPageEdge {
  cursor: UUID!
  node: Post!
}

type Post {
  id: UUID!
  created: DateTime!
  updated: DateTime!
  title: String!
  content: String!
  user: User!
  group: Group!
  comments(first: Int = 10, after: UUID = null): CommentPage!
}

type Group {
  id: UUID!
  created: DateTime!
  updated: DateTime!
  name: String!
  title: String!
  memberships(first: Int = 10, after: UUID = null): MembershipPage!
  posts(first: Int = 10, after: UUID = null): PostPage!
}

type CommentPage {
  total: Int!
  edges: [CommentPageEdge!]!
  nodes: [Comment!]!
  pageInfo: PageInfo!
}

type CommentPageEdge {
  cursor: UUID!
  node: Comment!
}

type GroupPage {
  total: Int!
  edges: [GroupPageEdge!]!
  nodes: [Group!]!
  pageInfo: PageInfo!
}

type GroupPageEdge {
  cursor: UUID!
  node: Group!
}

type UserPage {
  total: Int!
  edges: [UserPageEdge!]!
  nodes: [User!]!
  pageInfo: PageInfo!
}

type UserPageEdge {
  cursor: UUID!
  node: User!
}

type Mutation {
  createComment(post: UUID!, content: String!): Comment!
  createChildComment(parent: UUID!, content: String!): Comment!
  deleteComment(id: UUID!): Comment
  createGroup(name: String!, title: String!): Group!
  deleteGroup(id: UUID!): Group
  createMembership(user: UUID!, group: UUID!): Membership!
  deleteMembership(id: UUID!): Membership
  createPost(group: UUID!, title: String!, content: String!): Post!
  deletePost(id: UUID!): Post
  createUser(username: String!, email: String!, password: String!): User!
  deleteUser(id: UUID!): User
  login(username: String!, password: String!): LoginResult
  refresh(refreshToken: String): RefreshResult
}

type LoginResult {
  user: User!
  refreshToken: String!
  accessToken: String!
}

type RefreshResult {
  user: User!
  accessToken: String!
  refreshToken: String!
}

type Subscription {
  groupCreated: Group!
  groupDeleted: Group!
}
